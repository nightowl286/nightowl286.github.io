<!DOCTYPE html>

<html>
   <head>
      <style>
         /* Add colors to prevent flash bangs in case css file takes a while to load. */
         html {
            background-color: #171717;
            color: #d7d7d7;
         }
      </style>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="theme-color" content="#2a2a2a">
      <meta name="og:image" content="https://raw.githubusercontent.com/nightowl286/nightowl286.github.io/master/pfp.png">
      <meta property="og:type" content="website">

      <meta name="description" content="A post about Nightowl's project idea to create the best offline music player, initially inspired simply because shuffle algorithms suck.">
      <meta property="og:description" content="A post about Nightowl's project idea to create the best offline music player, initially inspired simply because shuffle algorithms suck.">

      <link rel="me" href="mailto:nightowl286@protonmail.com">
      <link rel="icon" sizes="256x256" href="icon.png">
      <link rel="stylesheet" href="../style.css">
      <link rel="stylesheet" href="wishlist.css">

      <meta property="og:title" content="Nightowl's website - Husic wishlist project">
      <title>Nightowl's website - Husic wishlist project</title>
   </head>

   <body>
      <main>
         <!-- Introduction -->
         <section id="introduction">
            <div class="card">
               <h1><a href="#introduction">Husic</a></h1>
               <p>
                  A project to create the best offline music player,
                  initially inspired simply because shuffle algorithms suck.
               </p>
               <br>
               <a href="../index.html" title="Return to the main page">Return to home page.</a>
            </div>

            <div class="region">
               <p>
                  Music players are cool, there's a lot of different ways they can be made, they
                  come with different <abbr title="Quality of life">QoL</abbr> features, some forget
                  what the word <abbr title="Do not connect to the f**king internet">offline</abbr> means,
                  some decide to stream music from god knows what questionable sources, and some are
                  created by people who clearly have no artistic bone in their body <i>(not their fault though)</i>.
               </p>
            </div>
         </section>

         <!-- Table of contents -->
         <section id="toc">
            <div class="card">
               <h2><a href="#toc" title="Anchor link to this section.">Table of contents</a></h2>
            </div>
            <section class="region">
               <ol>
                  <li><a href="#introduction">Introduction</a></li>
                  <li><a href="#toc">Table of contents</a></li>
                  <li><a href="#shuffle">Shuffle algorithms</a></li>
                  <ol>
                     <li><a href="#shuffle-random">Randomly picking the next song</a></li>
                     <li><a href="#shuffle-upcoming">Shuffling the upcoming songs in the queue</a></li>
                     <li><a href="#shuffle-youtube">YouTube</a></li>
                     <li><a href="#shuffle-solution">Solution?</a></li>
                  </ol>
                  <li><a href="#covers">Album & song covers</a></li>
               </ol>
            </section>
         </section>

         <!-- Shuffle algorithms -->
         <section id="shuffle">
            <div class="card">
               <h2><a href="#shuffle" title="Anchor link to this section.">Shuffle algorithms</a></h2>
               <p><i>(Where do I even begin with this)</i></p>
            </div>
            <section class="region">
               <p>
                  Okay so shuffle algorithms suck when it comes to listening to music. There are a few
                  common <i>(and terrible)</i> things that a lot of programs and websites do when it
                  comes to shuffling, and they all suck in their own terrible ways.
               </p>
            </section>

            <!-- Randomly picking the next song -->
            <article id="shuffle-random">
               <h3><a href="#shuffle-random" title="Anchor link to this section.">Randomly picking the next song</a></h3>
               <div class="region">
                  <p>
                     Why would anyone ever actually want this, like whyyyyyyy..... Just how lazy did the developers get?!
                     Do they even listen to music themselves?! Or talk to anyone that listens to music regularly?!
                     Why in the name of all that is sane would <em>anyone</em> want this?!
                  </p>
                  <p>
                     There are SOOOOO many problems with this approach <i>(depending on just how lazy the <abbr title="developers">devs</abbr> are)</i>,
                     especially when you're listening to shorter playlists. Imagine you get really unlucky, or the underlying
                     <a href="https://en.wikipedia.org/wiki/Pseudorandom_number_generator">
                        <abbr title="Pseudorandom number generator">PRNG</abbr>
                     </a>
                     algorithm is a really awful one, and the universe just deems that you should be jumping back and forth
                     between two or three songs.
                  </p>
                  <p>
                     But has this actually happened to someone? God I hope not, but the fact that it <em>could</em> happen, is concerning.
                     Especially when the probability isn't even that low.
                  </p>
                  <p>
                     Imagine you have a playlist that only contains 5 songs, so when a song
                     finishes plaything, there's a 25% probability for which song is chosen next
                     <i>(if your random pick allows for picking the same song that has just played then please be ashamed of yourself even more)</i>,
                     and so when that song finishes playing, there's a 25% probability
                     that the song you just listened to beforehand is picked.
                  </p>
                  <p>
                     What's worse is that getting a pattern like: A ➞ B ➞<sup>25%</sup> A ➞<sup>25%</sup> B is still a 6.25%
                     probability, <i>(since the first two picks don't matter, it only matters that the next two picks are the same as the first two)</i>
                     and with how much I listen to music this could be happening every day!!!
                  </p>
                  <p>
                     Does anyone actually do this? Yes, YouTube is a prime offender
                     <i>(among all the other problems YouTube has, but more on that later)</i>.
                  </p>
               </div>
            </article>

            <!-- Shuffling the upcoming songs -->
            <article id="shuffle-upcoming">
               <h3><a href="#shuffle-upcoming" title="Anchor link to this section.">Shuffling the upcoming songs in the queue</a></h3>
               <div class="region">
                  <p>
                     So usually, after the random pick algorithm has been thrown away because it sucks so much,
                     the developers instead decide to shuffle the upcoming songs that are currently in the queue.
                  </p>
                  <p>
                     This is already a huge improvement <i>(but it obviously has it's flaws, otherwise I wouldn't be talking about it here)</i>,
                     and if your playlist / queue is long enough, then it <em>usually</em> wouldn't cause you any further problems.
                  </p>
                  <p>
                     However, one big issue that I commonly see among the music players that do this, is that they don't re-shuffle
                     the queue once it has finished, they simply go back to the start.
                  </p>
                  <p>
                     Now this is a big problem because a lot of of music players also don't include a 're-shuffle' button, or
                     when they do it's usually just a button that cycles between 'song shuffle', 'album shuffle' and 'no shuffle',
                     so you end up having to click on it multiple times which is just annoying if you have to do it often.
                  </p>
                  <p>
                     Another reason why not re-shuffling the queue is a problem, is that for a lot of people music is something that
                     they have on in the background, they don't want to be switching back to the music player to re-shuffle the queue.
                  </p>
                  <p>
                     Now you might say that if they only have the music on in the background, then they wouldn't care about re-shuffling,
                     and that's fair, they might not, I'd say that it depends on the person, for me, if I have a short playlist on, then I
                     will start noticing that it's repeating in the same order.
                  </p>
                  <p>
                     Usually having a long playlist / queue avoids these problems. However, not always, because some people don't like
                     turning off their computers, and so their music player just stays open, keeping the exact same queue and never resetting.
                  </p>
                  <p>
                     Now obviously a person probably wouldn't remember the exact order their songs were played in on the previous day, but when
                     you get the same order several days in a row, you will start noticing what song comes on after the current one.
                     Try it out yourself by just listening to one playlist for a few days without ever shuffling it.
                  </p>
                  <p>
                     This can also be problematic on phones, because sometimes the music playing <abbr title="applications">apps</abbr> will
                     keep the queue even after you close them, since they are still running in the background.
                  </p>
               </div>
            </article>

            <!-- YouTube -->
            <article id="shuffle-youtube">
               <h3><a href="#shuffle-youtube" title="Anchor link to this section.">YouTube</a></h3>
               <div class="region">
                  <p>
                     So you might be thinking: "Why does YouTube get it's own section?" Well... That's
                     because it is the worst god damn piece of software that I have ever had the displeasure
                     of using to listen to music, it is absolutely dog poop and anyone who is on that developer
                     team should be ashamed of their existence for letting a product <em>so bad</em> continue to exist.
                  </p>
                  <p>
                     Not only does it use the 'randomly picking the next song' approach, but whatever it uses for the
                     <a href="https://en.wikipedia.org/wiki/Pseudorandom_number_generator">
                        <abbr title="Pseudorandom number generator">PRNG</abbr>
                     </a>
                     can end up bugging out and getting stuck in an infinite loop of a small number of songs from the
                     playlist / queue repeating.
                  </p>
                  <p>
                     I have absolutely no idea how they managed to screw that up. I would honestly love to blame it on
                     the implementation of <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/random"><code>Math.random()</code></a>
                     just to give YouTube at least a little bit of a chance, but it has happened to several different
                     people that I know, even across different browsers.
                  </p>
                  <p>
                     But that's not the end of YouTube's bugs, ohhhhh no, obviously they just have to somehow
                     keep on screwing things up, in the most ridiculous ways, and going years without bothering
                     to fix them.
                  </p>
                  <p>
                     So what is the next bug you ask? Well when you have a queue playing, then you also have the
                     toggle buttons for "shuffling" <i>(even though it's just randomly picking the next song)</i> and
                     repeating the entire queue once it ends. However, somehow, sometimes, for unknown reasons, those
                     toggle buttons end up resetting and turning off, meaning that occasionally, your songs stop
                     "shuffling", and even worse, they stop repeating.
                  </p>
                  <p>
                     And because YouTube uses the 'pick the next song randomly' approach, it means that even if you
                     have a queue of several hundred or thousand songs, it's possible for it to jump to the last song,
                     then bug out and stop the queue from repeating, and once your song ends, so does your music.
                     <i>(Assuming YouTube doesn't just start auto-playing a random video, because it also loves doing that for no reason).</i>
                  </p>
               </div>
            </article>

            <!-- Solution? -->
            <article id="shuffle-solution">
               <h3><a href="#shuffle-solution" title="Anchor link to this section.">Solution?</a></h3>
               <div class="region">
                  <p>
                     So what's the solution to this? Is there a perfect shuffling algorithm
                     that creates the best music listening experience? And honestly, that I
                     do not know yet.
                  </p>
                  <p>
                     I have played around with some possible ideas, however at the present my
                     limited maths skills are letting me down. <i>(I hate learning maths...)</i>
                  </p>
                  <p>
                     However, my general opinion is that shuffling algorithms should properly
                     keep track of the queue history, and use that information as heuristics
                     in order to eliminate repeating patterns.
                  </p>
                  <p>
                     In my opinion, that should at the very least include making sure that
                     songs that were near each other are spread out, while making sure to account
                     for the end and start of the queue.
                  </p>
                  <p>
                     What I mean by this, is that if your current queue looked like <code>A, B, C, D</code>,
                     then the next shuffled queue (which will play afterwards) should not be
                     <code>C, A, D, B</code> for example. This is because when you combine them,
                     and look at what the user will actually be hearing, you'll get
                     <code>A, B, C, D, C, A, D, B</code> and from this you can clearly see the
                     <code>C, D, C</code> pattern, which can occur if you don't make sure to
                     check the end of the current queue, and the start of the new one.
                  </p>
               </div>
            </article>
         </section>

         <!-- Album & song covers -->
         <section id="covers">
            <div class="card">
               <h2><a href="#covers" title="Anchor link to this section.">Album & song covers</a></h2>
               <p><i>(Early optimisation is the root of all evil).</i></p>
            </div>
         </section>
      </main>
      <footer>
         <p>Disclaimer: I may be a programmer, but I am most certainly not a web developer.</p>
      </footer>
   </body>
</html>